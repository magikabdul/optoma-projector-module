PROGRAM_NAME='mainlineAonNx'
(***********************************************************)
(***********************************************************)
(*  FILE_LAST_MODIFIED_ON: 01/12/2019  AT: 17:13:01        *)
(***********************************************************)
(* System Type : NetLinx                                   *)
(***********************************************************)
(* REV HISTORY:                                            *)
(***********************************************************)
(*
    $History: $

		v 1.0.0 (2019-01-12)
			new:
				- initial code


*)
#INCLUDE 'SNAPI'
#INCLUDE 'CHAPI'
#INCLUDE 'xml_string_control'
#INCLUDE 'amx_panel_control_v2'
#INCLUDE 'nx_string_control'
(***********************************************************)
(*          DEVICE NUMBER DEFINITIONS GO BELOW             *)
(***********************************************************)
DEFINE_DEVICE

dvProjector		=     0: 5:0
vdvProjector	= 33001: 1:0
(***********************************************************)
(*               CONSTANT DEFINITIONS GO BELOW             *)
(***********************************************************)
DEFINE_CONSTANT

(***********************************************************)
(*              DATA TYPE DEFINITIONS GO BELOW             *)
(***********************************************************)
DEFINE_TYPE

(***********************************************************)
(*               VARIABLE DEFINITIONS GO BELOW             *)
(***********************************************************)
DEFINE_VARIABLE

VOLATILE INTEGER isProjectorOnline;
(***********************************************************)
(*                INCLUDE DEFINITIONS GO BELOW             *)
(***********************************************************)

(***********************************************************)
(*                MODULE CODE GOES BELOW                   *)
(***********************************************************)
//----------------------------------------------------------------------------------------------------
// 																					  rmsAdapterModule
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//  																				 duetDeviceModules
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//  																			  netlinxDeviceModules
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//																						 switerModules
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
// 																						   commModules
//----------------------------------------------------------------------------------------------------

(***********************************************************)
(*               LATCHING DEFINITIONS GO BELOW             *)
(***********************************************************)
DEFINE_LATCHING

(***********************************************************)
(*       MUTUALLY EXCLUSIVE DEFINITIONS GO BELOW           *)
(***********************************************************)
DEFINE_MUTUALLY_EXCLUSIVE

(***********************************************************)
(*        SUBROUTINE/FUNCTION DEFINITIONS GO BELOW         *)
(***********************************************************)
(* EXAMPLE: DEFINE_FUNCTION <RETURN_TYPE> <NAME> (<PARAMETERS>) *)
(* EXAMPLE: DEFINE_CALL '<NAME>' (<PARAMETERS>) *)

DEFINE_START


//----------------------------------------------------------------------------------------------------
// 																					  rmsAdapterModule
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//  																				 duetDeviceModules
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
// 																				  netlinxDeviceModules
//----------------------------------------------------------------------------------------------------
DEFINE_MODULE 'Optoma_IP-Controlled_Comm_nl1_0_0' mdlProjector01 (vdvProjector, dvProjector)
//----------------------------------------------------------------------------------------------------
//	 																						 uiModules
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//  																						   rmsComm
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//  																						 rmsSystem
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
//																						rmsSourceUsage
//----------------------------------------------------------------------------------------------------


(***********************************************************)
(*                THE EVENTS GO BELOW                      *)
(***********************************************************)
DEFINE_EVENT

DATA_EVENT[vdvProjector]
{
	ONLINE:
	{
		SEND_COMMAND vdvProjector, 'PROPERTY-IP_Address,192.168.1.99'	//podmieñ na w³¹sciwy adres IP
		SEND_COMMAND vdvProjector, 'PROPERTY-IP_Port,21'				//potrzebny je¿eli projector dzia³a na innym porcie ni¿ 21
		SEND_COMMAND vdvProjector, 'REINIT'
	}
}

CHANNEL_EVENT[vdvProjector, DEVICE_COMMUNICATING]
{
	ON:  isProjectorOnline = TRUE;
	OFF: isProjectorOnline = FALSE;
}